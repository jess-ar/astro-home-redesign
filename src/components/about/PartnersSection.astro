---
const partners = [
  { name: "Publicis Groupe",       logo: "/images/logos/publicis-text-logo.png" },
  { name: "Epsilon",               logo: "/images/logos/epsilon-logo.png" },
  { name: "Omnicom Group",         logo: "/images/logos/Omnicom-logo.png" },
  { name: "Kompass International", logo: "/images/logos/kompass-logo.svg" },
  { name: "Groupon",               logo: "/images/logos/groupon-logo.png" },
  { name: "Deezer",                logo: "/images/logos/deezer-logo.png" },
  { name: "Conversant",            logo: "/images/logos/conversant-logo.png" },
  { name: "Companeo",              logo: "/images/logos/companeo-logo.png" },
  { name: "Elpev",                 logo: "/images/logos/elpev-logo.png" },
  { name: "Easy Voyage",           logo: "/images/logos/easyvoyage-logo.svg" },
  { name: "Apple Music",           logo: "/images/logos/apple-music-logo.png" },
  { name: "B & Q",                 logo: "/images/logos/b&q-logo.png" },
  { name: "Charles Tyrwhitt",      logo: "/images/logos/charles-logo.jpeg" },
  { name: "AXA",                   logo: "/images/logos/axa-logo.svg" },
  { name: "Elixis",                logo: "/images/logos/elixis-logo.png" },
  { name: "Nike",                  logo: "/images/logos/nike-logo.png" },
  { name: "Decathlon",             logo: "/images/logos/decathlon-logo.png" },
  { name: "Disney +",              logo: "/images/logos/disney-logo.svg" },
  { name: "Superdry",              logo: "/images/logos/superdry-logo.png" },
];
---

<section
  aria-labelledby="partners-heading"
  class="relative py-12 md:py-16 bg-gradient-to-b from-white to-cyan-50 overflow-hidden"
>
  <div class="relative z-10 container mx-auto px-4">
    <div class="text-center mb-10">
      <h2
        id="partners-heading"
        class="scroll-reveal opacity-0 text-3xl md:text-4xl lg:text-5xl font-bold uppercase tracking-tight"
        data-delay="0"
      >
        <span class="bg-gradient-to-r from-blue-950 via-blue-800 to-cyan-600 text-transparent bg-clip-text">
          Who we work with
        </span>
      </h2>
      <div class="w-20 h-1 bg-secondary mx-auto mt-3 mb-6 animate-scale-in" aria-hidden="true"></div>
      <p
        class="scroll-reveal opacity-0 text-gray-700 text-base md:text-lg leading-relaxed max-w-4xl mx-auto"
        data-delay="100"
      >
        For over 10 years, we've powered marketing strategies for leading brands and agenciesâ€”growing audiences, increasing revenue, and automating seamless campaigns.
      </p>
    </div>

    <ul
      role="list"
      class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4 md:gap-6 max-w-5xl mx-auto"
    >
      {partners.map((p, i) => (
        <li
          role="listitem"
          class="scroll-reveal flex items-center justify-center opacity-0"
          data-delay={i * 50}
        >
          <div
            class="relative w-28 h-28 rounded-full bg-white/60 backdrop-blur-sm flex items-center justify-center transition-transform duration-300 hover:scale-105 hover:rotate-3"
          >
            <img
              src={p.logo}
              alt={p.name}
              class="max-w-3/4 max-h-3/4 object-contain"
              loading="lazy"
            />
          </div>
        </li>
      ))}
    </ul>
  </div>

  <!-- Scroll-reveal script with faster delays and repeated animation -->
  <script is="client" type="module">
    (function() {
      const items = document.querySelectorAll('.scroll-reveal');
      const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      // Initial hidden state
      items.forEach(el => {
        el.classList.add('opacity-0');
        el.style.transform = 'translateY(1rem)';
      });
      if (reduced) {
        items.forEach(el => {
          el.classList.remove('opacity-0');
          el.style.transform = 'none';
        });
        return;
      }
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(({ target, isIntersecting }) => {
          const delay = target.dataset.delay || 0;
          if (isIntersecting) {
            target.style.transition = `opacity 0.6s ease ${delay}ms, transform 0.6s ease ${delay}ms`;
            target.classList.remove('opacity-0');
            target.style.transform = 'translateY(0)';
          } else {
            target.classList.add('opacity-0');
            target.style.transform = 'translateY(1rem)';
          }
        });
      }, { threshold: 0.2, rootMargin: '0px 0px -10% 0px' });
      items.forEach(el => observer.observe(el));
    })();
  </script>

  <style is="global">
    @keyframes fade-in-up {
      0%   { opacity: 0; transform: translateY(20px) scale(0.95); }
      100% { opacity: 1; transform: translateY(0)      scale(1); }
    }
    .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }

    @keyframes scale-in { 0% { transform: scaleX(0.5); opacity: 0; } 100% { transform: scaleX(1); opacity: 1; } }
    .animate-scale-in { animation: scale-in 0.4s ease-out forwards; transform-origin: center; }
  </style>
</section>
